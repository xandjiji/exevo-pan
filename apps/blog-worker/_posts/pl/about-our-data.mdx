---
title: O danych
description: Kilka zastrze偶e dotyczcych tego, skd pochodz nasze dane i jakie s ich ograniczenia.
date: 21-09-2021
thumbnail: /blog/thumbnails/dataTome.png
author: Ksu
translator: Odbyczon
tags:
  - article
---

## Skd pochodz dane

Poniewa偶 nie istnieje oficjalne API Tibii, prawie wszystkie dane o grze pochodz bezporednio z oficjalnej strony Tibii. Stosujemy technik zwan _data scraping_, co oznacza, 偶e regularnie wysyamy zapytania `HTTP` do oficjalnej strony, a nastpnie zbieramy wasne dane na podstawie odpowiedzi.

Nie jest to najbardziej eleganckie rozwizanie, ale obecnie jest to jedyna dostpna opcja dla deweloper贸w, kt贸rzy chc budowa aplikacje wykorzystujce prawdziwe dane z Tibii. I wi偶e si to z kilkoma **wyzwaniami**:

- Drobne zmiany w strukturze strony Tibii mog atwo zepsu nasze skrypty.
- Zapytania s czsto odrzucane (g贸wnie z powodu zabezpiecze anti-DDoS).
- Wykrywanie i aktualizowanie nieaktualnych danych.

To zbyt du偶o rzeczy do zarzdzania i automatyzowania, zanim w og贸le zaczniemy budowa aplikacj korzystajc z tych danych. To du偶e obci偶enie mo偶e atwo zniechci deweloper贸w, kt贸rzy chc tworzy aplikacje do Tibii. Gdyby CipSoft udostpni deweloperom oficjalne API, wiele ciekawych narzdzi i aplikacji rozkwitoby w spoecznoci .

## Jak dokadne s?

Nie mo偶emy zagwarantowa, 偶e nasze dane s w 100% dokadne, nawet jeli pochodz z oficjalnej strony.

W przypadku aktualnych aukcji nasze dane mog by **op贸藕nione nawet o 10 minut**. Oznacza to, 偶e jeli potrzebujesz najbardziej aktualnych informacji o bie偶cej **cenie**, powiniene sprawdzi oficjaln stron aukcji. Wszystko inne jest stabilne.

---

Jeli chodzi o aukcje historyczne, sprawa si komplikuje. Oficjalnie CipSoft udostpnia wasn <ExternalLink href="https://www.tibia.com/charactertrade/?subtopic=pastcharactertrades">Histori Aukcji</ExternalLink>, ale dane **wygasaj po 30 dniach**. Nie oznacza to jednak, 偶e starsze dane s cakowicie utracone. Nadal mo偶esz uzyska dostp do pojedynczych stron aukcji, u偶ywajc ich ID:

<pre>
 <code>
   https://www.tibia.com/charactertrade
   <br />
   /?subtopic=currentcharactertrades&page=details<b>{'&auctionid=0'}</b>
 </code>
</pre>

Niestety cz danych jest uszkodzona. Na przykad bardzo czsto zobaczysz postacie bez punkt贸w achievement (co jest niemo偶liwe). W najgorszym przypadku niekt贸re stare aukcje s cakowicie niedostpne:

> An internal error has occurred. Please try again later!

Ale te aukcje istniay! W rzeczywistoci <ExternalLink href="https://tibiavip.app/auctions">TibiaVIP</ExternalLink> nadal posiada informacje o niekt贸rych z nich:

<Image
  src="https://i.imgur.com/37WKx88.png"
  width={508}
  height={57}
  align="center"
  alt="Stara aukcja"
  caption={
    <>
      Jeli spr贸bujesz wej na aukcj o ID{' '}
      <ExternalLink href="https://www.tibia.com/charactertrade/?subtopic=currentcharactertrades&page=details&auctionid=3">
        #3
      </ExternalLink>
      , nie bdzie ju偶 dostpna
    </>
  }
  unoptimized
/>

Poniewa偶 dzieje si to najczciej w przypadku **starszych** aukcji, wierzymy, 偶e mo偶e to wynika z faktu, i偶 CipSoft nie jest w stanie wstecznie aktualizowa starych wpis贸w w Char Bazaar. W miar wprowadzania kolejnych aktualizacji (i kolejnych danych) do gry, cz wpis贸w aukcyjnych ulega uszkodzeniu.

Szacujemy, 偶e w naszej bazie historycznej brakuje okoo `200,000` wpis贸w aukcyjnych. A poniewa偶 nasze <RouteLink href="/statistics">statystyki</RouteLink> s obliczane na podstawie wasnej bazy danych, niekt贸re liczby powinny by w rzeczywistoci **wy偶sze** ni偶 te, kt贸re podajemy.

Jeli jeste ciekaw naszej strategii scrapowania i skrypt贸w, mo偶esz je sprawdzi <ExternalLink href="https://github.com/xandjiji/exevo-pan/tree/master/apps/bazaar-scraper">tutaj</ExternalLink>. Wszystko jest dobrze udokumentowane i mo偶esz nawet skonfigurowa wasne rodowisko, aby uruchamia te skrypty samodzielnie 

## Czy mog u偶ywa waszych API?

Tak, mo偶esz. Ale nie oferujemy 偶adnego wsparcia ani gwarancji! 锔

Nasze API czsto si zmienia, co oznacza, 偶e nie powiniene budowa aplikacji, kt贸re na nim polegaj. Jeli potrzebujesz stabilnego API, mo偶esz u偶y <ExternalLink href="https://github.com/xandjiji/exevo-pan">naszego kodu</ExternalLink>, aby samodzielnie scrapowa i serwowa dane.

Jeli wykonujesz automatyczne zapytania do naszych endpoint贸w, upewnij si, 偶e nie robisz tego zbyt czsto. Nadu偶ycia najprawdopodobniej zostan automatycznie wykryte i zablokowane przez naszych dostawc贸w (AWS, Cloudflare itp.).

---

Jeli masz inne pytania, miao <RouteLink href="/about#Contact-Information">skontaktuj si ze mn</RouteLink>.
